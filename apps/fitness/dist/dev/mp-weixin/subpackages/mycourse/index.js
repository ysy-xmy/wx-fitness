"use strict";const e=require("../../common/vendor.js"),i=require("../../api/courses/courses.js"),U=require("../../api/course/index.js");require("../../utils/request.js");if(!Array){const d=e.resolveComponent("van-circle"),u=e.resolveComponent("van-switch"),a=e.resolveComponent("van-tab"),c=e.resolveComponent("van-tabs");(d+u+a+c)()}Math||(q+j)();const q=()=>"../../components/mycourse/PlanList.js",j=()=>"../../components/plan-card/index.js",D=e.defineComponent({__name:"index",setup(d,{expose:u}){const a=e.ref(!1);let c=e.ref([]);const m=e.ref(),r=e.ref(""),n=e.H(),t=e.ref({id:"",name:"",desc:"",Percentage:"",CoachName:"",LessonCount:"",EndTime:"",CreatedAt:""}),L={"0%":"#3ed2de","100%":"#5aa6f4"},I=e.ref(0),v=()=>{e.index.showLoading({title:"加载中",mask:!1}),U.getCoursePlan(m.value).then(s=>{let o=s.data.data||[];e.index.hideLoading(),c.value=o}).finally(()=>{e.index.hideLoading()})},b=()=>{e.index.showModal({title:a.value?"取消授权":"授权教练打卡",content:a.value?"是否取消授权":"是否授权教练打卡？",confirmText:"确定",cancelText:"取消",success:s=>{s.confirm&&(a.value?i.cancelCoachClok(r.value).then(o=>{e.index.showToast({title:"取消授权成功",icon:"success",duration:2e3}),a.value=!a.value}):i.allowCoachClock(r.value).then(o=>{o.data.code==200?(e.index.showToast({title:"授权成功",icon:"success",duration:2e3}),a.value=!a.value):e.index.showToast({title:o.data.msg,icon:"error",duration:2e3})}))},fail:s=>{console.error("showModal 调用失败",s)}})},E=()=>{c.value=[]};e.onMounted(()=>{var p,C,h,f,_,g,x,T,P,w;const s=(p=n.route.value.params)==null?void 0:p.id;m.value=(C=n.route.value.params)==null?void 0:C.id,r.value=(h=n.route.value.params)==null?void 0:h.id;const o=(f=n.route.value.params)==null?void 0:f.name,l=(_=n.route.value.params)==null?void 0:_.desc,k=decodeURIComponent(((g=n.route.value.params)==null?void 0:g.CoachName)||""),y=(x=n.route.value.params)==null?void 0:x.LessonCount,A=(T=n.route.value.params)==null?void 0:T.EndTime,M=(P=n.route.value.params)==null?void 0:P.Percentage,R=(w=n.route.value.params)==null?void 0:w.CreatedAt;t.value={id:s,name:decodeURIComponent(o||""),desc:decodeURIComponent(l||""),CoachName:decodeURIComponent(k||""),Percentage:M,LessonCount:y,EndTime:decodeURIComponent(A||""),CreatedAt:decodeURIComponent(R||"")},v(),N()});const N=()=>{i.getMycourese().then(s=>{s.data.data.forEach(o=>{if(o.ID==r.value){a.value=o.CoachPunchInAuth;return}})})};return u({initList:E,getPlanlist:v}),(s,o)=>({a:e.t(t.value.name),b:e.p({strokeWidth:"6",size:"60",layerColor:"#ebedf0",color:L,value:100-Number(t.value.Percentage),text:100-Number(t.value.Percentage)+"%"}),c:e.t(t.value.desc?t.value.desc:"暂无描述"),d:e.o(b),e:e.p({checked:a.value}),f:e.p({type:"outline",list:e.unref(c),LessonCount:t.value.LessonCount,EndTime:t.value.EndTime,CoachName:t.value.CoachName}),g:e.p({title:"线下计划"}),h:e.p({type:"online",list:e.unref(c),LessonCount:t.value.LessonCount,EndTime:t.value.EndTime,CoachName:t.value.CoachName}),i:e.p({title:"线上任务"}),j:e.p({title:"私教课",startDate:t.value.CreatedAt,endDate:t.value.EndTime,status:I.value,actionGroups:e.unref(c).filter(l=>l.Complete)}),k:e.p({title:"已完成"}),l:e.p({swipeable:!0,animated:!0,color:"#46c5e5"})})}}),z=e._export_sfc(D,[["__file","J:/fItness/wx-fitness/apps/fitness/src/subpackages/mycourse/index.vue"]]);wx.createPage(z);
