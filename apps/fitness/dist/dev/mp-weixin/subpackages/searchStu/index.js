"use strict";const e=require("../../common/vendor.js"),k=require("../../api/coach/index.js"),S=require("../../api/course/index.js"),i=require("../../state/modules/actions.js");require("../../utils/request.js");if(!Array){const f=e.resolveComponent("van-empty"),p=e.resolveComponent("van-button"),t=e.resolveComponent("van-field"),r=e.resolveComponent("van-dialog");(f+p+t+r)()}const x=e.defineComponent({__name:"index",setup(f){const p=e.H();e.onMounted(()=>{_()});const t=e.ref([]),r=e.ref(!1),c=e.ref([]),u=e.ref({}),s=e.ref(""),_=async()=>{const n=await k.getCoachStudentinfo();n.data.code===200&&(c.value=n.data.data),console.log("教练学生列表",n,c.value),t.value=c.value},h=n=>{s.value=n.StudentRemark||"",u.value=n,r.value=!0},D=n=>{switch(n){case"month":return"包月";case"quarter":return"包季";case"year":return"包年";case"lesson":return"";default:return""}},d=e.ref(""),I=()=>{t.value=c.value.filter(n=>n.Username.indexOf(d.value)!==-1||n.StudentRemark.indexOf(d.value)!==-1)},g=async()=>{const n=s.value;if((await S.changeCourseMes({ID:u.value.ID,UserID:u.value.UserID,CourseID:u.value.CourseID,StudentRemark:s.value})).data.code==200){e.index.showToast({title:"备注成功",icon:"success"});const a=t.value.find(o=>o.ID===u.value.ID);a&&(a.StudentRemark=n);const l=c.value.find(o=>o.ID===u.value.ID);l&&(l.StudentRemark=n),s.value="",r.value=!1}else e.index.showToast({title:"备注失败",icon:"error"})},C=(n,v,a,l,o)=>{console.log("查看"),i.useActionsStore().setClassID(v),i.useActionsStore().setClassname(l),i.useActionsStore().setRemark(o),p.push({name:"studentDetail",params:{studentId:n,courseId:v,CoachPunchInAuth:a}})};return(n,v)=>e.e({a:d.value,b:e.o(a=>d.value=a.detail.value),c:e.o(I),d:t.value.length===0},t.value.length===0?{e:e.p({description:"暂无学员"})}:{f:e.f(t.value,(a,l,o)=>e.e({a:a.Avatar?a.Avatar:"https://img.yzcdn.cn/vant/user-inactive.png",b:e.t(a.CoachID!==0?a.Username:"自我训练"),c:a.StudentRemark},a.StudentRemark?{d:e.t(a.StudentRemark)}:{},{e:a.CoachID!==0},a.CoachID!==0?e.e({f:e.t(a.Name),g:e.t(D(a.CourseType)),h:e.t(a.LessonCount?a.LessonCount+"节":""),i:a.remark},a.remark?{j:e.t(a.remark)}:{}):{},{k:e.o(m=>C(a.UserID,a.ID,a.CoachPunchInAuth,a.Name,a.StudentRemark),a.ID),l:"e35d4709-1-"+o,m:a.CoachID!==0},a.CoachID!==0?{n:e.o(m=>h(a),a.ID),o:"e35d4709-2-"+o,p:e.p({color:"#8e44ad",size:"small",round:!0,type:"primary"})}:{},{q:a.ID})),g:e.p({color:"#5ccee0",size:"small",round:!0,type:"primary"})},{h:e.o(a=>s.value=a.detail),i:e.p({value:s.value,placeholder:"输入备注"}),j:e.o(g),k:e.o(()=>{s.value="",r.value=!1}),l:e.p({useSlot:!0,title:"添加备注",show:r.value,showCancelButton:!0})})}}),y=e._export_sfc(x,[["__scopeId","data-v-e35d4709"],["__file","J:/fItness/wx-fitness/apps/fitness/src/subpackages/searchStu/index.vue"]]);wx.createPage(y);
