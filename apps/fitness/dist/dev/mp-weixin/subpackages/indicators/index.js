"use strict";const e=require("../../common/vendor.js"),x=require("../../state/app.js"),m=require("../../api/body/index.js");require("../../utils/request.js");if(!Array){const p=e.resolveComponent("van-button"),l=e.resolveComponent("van-cell-group");(p+l)()}Math||W();const W=()=>"../../components/lime-echart/lime-echart.js",A=e.defineComponent({__name:"index",setup(p){const l=e.ref(e.dayjs().subtract(1,"year").format("YYYY-MM-DD")),d=e.ref(e.dayjs().format("YYYY-MM-DD")),c=e.ref(!1),f=e.ref(0);e.ref("");const h=e.dayjs().format("YYYY-MM-DD");e.onMounted(()=>{e.index.$on("changeBotData",t=>{if(console.log(t,"123"),n.value!=1){const o=t.oldTime.split("-"),a=t.newTime.split("-");console.log(t,n.value,"1234"),u.value={timeYear:a[0],timeMonth:a[1],timeDay:a[2],type:g[n.value],data:t.newVal+b[n.value],sententce:`初始${g[n.value]}`,beginMonth:o[1],beginDay:o[2],beginYear:o[0],beginData:t.oldVal+b[n.value],change:`${Number(t.newVal)-Number(t.oldVal)}${b[n.value]}`},console.log(u.value,"123")}else{const o=t.old.time.split("-"),a=t.new.time.split("-");r.value={timeYear:a[0],timeMonth:a[1],timeDay:a[2],timeBust:t.new.BUST,timeWaistline:t.new.WAIST,timeHips:t.new.HIP,beginMonth:o[1],beginDay:o[2],beginYear:o[0],beginBust:t.old.BUST,beginWaistline:t.old.WAIST,beginHips:t.old.HIP}}})});const y=t=>{l.value=t.detail.value,e.index.$emit("changeTime",!0)},B=t=>{d.value=t.detail.value,e.index.$emit("changeTime",!0)},D=x.useAppStore();e.ref(D.getCurrentDate);const T=[{title:"体重",content:"weight"},{title:"三围",content:"three"},{title:"体脂率",content:"body_fat"},{title:"BMI",content:"bmi"},{title:"身高",content:"height"}];function H(t){const o=t.currentTarget.dataset.id;console.log(o,t.currentTarget.dataset,"123"),f.value=parseInt(o),v.value=T[f.value].content,console.log(v.value,"123"),e.index.$emit("change",v.value),n.value=o,console.log(n.value,"123"),e.index.$emit("changeType",o)}function M(){c.value=!0}function _(){c.value=!1}const n=e.ref(0),v=e.ref(T[f.value].content),g=["体重","三维","体脂率","BMI","身高"],I=["WEIGHT","THREE","BODY_FAT","BMI","HEIGHT"],b=["KG","cm","%","","cm"];let u=e.ref({timeYear:"",timeMonth:"",timeDay:"",type:g[n.value],data:"",sententce:`初始${g[n.value]}`,beginMonth:"",beginDay:"",beginYear:"",beginData:"",change:""}),r=e.ref({timeYear:"",timeMonth:"",timeDay:"",timeBust:"",timeWaistline:"",timeHips:"",beginMonth:"",beginDay:"",beginYear:"",beginBust:"",beginWaistline:"",beginHips:""}),i=e.reactive({WEIGHT:"",BUST:"",WAIST:"",HIP:"",BODY_FAT:"",BMI:"",HEIGHT:""});const Y=async()=>{if(e.index.showLoading(),n.value!=1){console.log(n.value,"123");let t={Type:I[n.value],Value:Number(i[I[n.value]])};m.addBodydata(t).then(o=>{e.index.hideLoading(),o.data.code==200?(e.index.showToast({title:"增加成功",icon:"success"}),e.index.$emit("changeTime",!0),c.value=!1,i={WEIGHT:"",BUST:"",WAIST:"",HIP:"",BODY_FAT:"",BMI:"",HEIGHT:""}):e.index.showToast({title:"增加失败",icon:"error"})}).catch(o=>{e.index.hideLoading(),e.index.showToast({title:"增加失败",icon:"error"})})}else{let t={Type:"BUST",Value:Number(i.BUST)},o={Type:"WAIST",Value:Number(i.WAIST)},a={Type:"HIP",Value:Number(i.HIP)};const s=await Promise.all([m.addBodydata(t),m.addBodydata(o),m.addBodydata(a)]);e.index.hideLoading(),s.every(w=>w.data.code===200)?(e.index.showToast({title:"增加成功",icon:"success"}),e.index.$emit("changeTime",!0),c.value=!1,i={WEIGHT:"",BUST:"",WAIST:"",HIP:"",BODY_FAT:"",BMI:""}):e.index.showToast({title:"增加失败",icon:"error"})}};return(t,o)=>e.e({a:e.f(T,(a,s,S)=>({a:e.t(a.title),b:e.n(s==f.value?"text-_hFF5E3A_ cur":""),c:s,d:e.o(H,s),e:s})),b:e.t(l.value),c:l.value,d:e.o(y),e:e.unref(h),f:e.t(d.value),g:d.value,h:e.o(B),i:e.unref(h),j:n.value!=1},n.value!=1?{k:e.t(e.unref(u).timeMonth),l:e.t(e.unref(u).timeDay),m:e.t(e.unref(u).beginYear),n:e.t(e.unref(u).type),o:e.t(e.unref(u).data),p:e.t(e.unref(u).sententce),q:e.t(e.unref(u).beginMonth),r:e.t(e.unref(u).beginDay),s:e.t(e.unref(u).beginYear),t:e.t(e.unref(u).beginData),v:e.t(e.unref(u).change)}:{w:e.t(e.unref(r).timeMonth),x:e.t(e.unref(r).timeDay),y:e.t(e.unref(r).beginYear),z:e.t(e.unref(r).timeBust),A:e.t(e.unref(r).timeWaistline),B:e.t(e.unref(r).timeHips),C:e.t(e.unref(r).beginMonth),D:e.t(e.unref(r).beginDay),E:e.t(e.unref(r).beginYear),F:e.t(e.unref(r).beginBust),G:e.t(e.unref(r).beginWaistline),H:e.t(e.unref(r).beginHips)},{I:e.p({endTime:d.value,beginTime:l.value}),J:e.o(M),K:e.o(_),L:n.value==0},n.value==0?{M:e.unref(i).WEIGHT,N:e.o(a=>e.unref(i).WEIGHT=a.detail.value)}:{},{O:n.value==1},n.value==1?{P:e.unref(i).BUST,Q:e.o(a=>e.unref(i).BUST=a.detail.value),R:e.unref(i).WAIST,S:e.o(a=>e.unref(i).WAIST=a.detail.value),T:e.unref(i).HIP,U:e.o(a=>e.unref(i).HIP=a.detail.value)}:{},{V:n.value==2},n.value==2?{W:e.unref(i).BODY_FAT,X:e.o(a=>e.unref(i).BODY_FAT=a.detail.value)}:{},{Y:n.value==3},n.value==3?{Z:e.unref(i).BMI,aa:e.o(a=>e.unref(i).BMI=a.detail.value)}:{},{ab:n.value==4},n.value==4?{ac:e.unref(i).HEIGHT,ad:e.o(a=>e.unref(i).HEIGHT=a.detail.value)}:{},{ae:e.o(Y),af:e.p({size:"large",type:"primary",round:!0,color:"linear-gradient(90deg, #3ed2de 0%, #5aa6f4 100%)"}),ag:e.p({inset:!0}),ah:e.n(c.value?"show":"")})}}),E=e._export_sfc(A,[["__scopeId","data-v-36bad326"],["__file","J:/fItness/wx-fitness/apps/fitness/src/subpackages/indicators/index.vue"]]);wx.createPage(E);
