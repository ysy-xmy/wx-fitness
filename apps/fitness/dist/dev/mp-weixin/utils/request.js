"use strict";const s=require("../common/vendor.js"),r=new s.Request({baseURL:"https://sit.2018ctjs.cn",timeout:3e4});r.interceptors.request.use(e=>{const t=s.index.getStorageSync("token");return t&&(e.header.Authorization=t),e.method==="POST"&&(e.data=JSON.stringify(e.data)),e},e=>Promise.resolve(e));r.interceptors.response.use(e=>e,e=>{e.statusCode==401&&(s.index.clearStorageSync(),s.index.switchTab({url:"/pages/index/index.vue"}));const{errMsg:t}=e;return console.log(t),Promise.resolve(e)});exports.http=r;
