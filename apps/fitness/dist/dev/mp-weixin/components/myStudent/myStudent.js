"use strict";const e=require("../../common/vendor.js"),I=require("../../api/coach/index.js"),v=require("../../state/modules/actions.js"),g=require("../../api/course/index.js");require("../../utils/request.js");if(!Array){const i=e.resolveComponent("van-button"),d=e.resolveComponent("van-empty"),t=e.resolveComponent("van-field"),r=e.resolveComponent("van-dialog");(i+d+t+r)()}const m=e.defineComponent({__name:"myStudent",setup(i){const d=e.H();let t=e.ref([]);const r=e.ref(!1);e.ref(""),e.ref(-1);const o=e.ref("");e.onMounted(()=>{e.index.showLoading({title:"数据加载中"}),p(),setTimeout(()=>{e.index.hideLoading()},3e3)});const p=async()=>{const a=await I.getCoachStudentinfo();a&&a.data&&a.data.data?t.value=a.data.data:t.value=[],e.index.hideLoading()},_=async()=>{const a=o.value;if((await g.changeCourseMes({ID:s.value.ID,UserID:s.value.UserID,CourseID:s.value.CourseID,StudentRemark:o.value})).data.code==200){e.index.showToast({title:"备注成功",icon:"success"}),console.log("备注成功",t.value,s.value,t.value.find(u=>u.ID===s.value.ID),a);const n=t.value.find(u=>u.ID===s.value.ID);n&&(n.StudentRemark=a),o.value="",r.value=!1}else e.index.showToast({title:"备注失败",icon:"error"})},f=a=>{switch(a){case"month":return"包月";case"quarter":return"包季";case"year":return"包年";case"lesson":return"";default:return""}},s=e.ref({}),h=a=>{o.value=a.StudentRemark||"",s.value=a,r.value=!0},D=(a,c,n,u,l)=>{console.log("查看"),v.useActionsStore().setClassID(c),v.useActionsStore().setClassname(u),v.useActionsStore().setRemark(l),d.push({name:"studentDetail",params:{studentId:a,courseId:c,CoachPunchInAuth:n}})};return(a,c)=>e.e({a:e.unref(t).length>0},e.unref(t).length>0?{b:e.f(e.unref(t),(n,u,l)=>e.e({a:n.Avatar?n.Avatar:"https://img.yzcdn.cn/vant/user-inactive.png",b:e.t(n.CoachID!==0?n.Username:"自我训练"),c:n.StudentRemark},n.StudentRemark?{d:e.t(n.StudentRemark)}:{},{e:n.CoachID!==0},n.CoachID!==0?e.e({f:e.t(n.Name),g:e.t(f(n.CourseType)),h:e.t(n.LessonCount?n.LessonCount+"节":""),i:n.remark},n.remark?{j:e.t(n.remark)}:{}):{},{k:e.o(C=>D(n.UserID,n.ID,n.CoachPunchInAuth,n.Name,n.StudentRemark),n.ID),l:"c5ab0604-0-"+l,m:n.CoachID!==0},n.CoachID!==0?{n:e.o(C=>h(n),n.ID),o:"c5ab0604-1-"+l,p:e.p({color:"#8e44ad",size:"mini",round:!0,type:"primary"})}:{},{q:n.ID})),c:e.p({color:"#5ccee0",size:"mini",round:!0,type:"primary"})}:{d:e.p({description:"暂无学员"})},{e:e.o(n=>o.value=n.detail),f:e.p({value:o.value,placeholder:"输入备注",maxlength:"10"}),g:e.o(_),h:e.o(()=>{o.value="",r.value=!1}),i:e.p({useSlot:!0,title:"添加备注",show:r.value,showCancelButton:!0})})}}),y=e._export_sfc(m,[["__scopeId","data-v-c5ab0604"],["__file","J:/fItness/wx-fitness/apps/fitness/src/components/myStudent/myStudent.vue"]]);wx.createComponent(y);
