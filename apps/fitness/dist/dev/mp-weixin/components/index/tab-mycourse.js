"use strict";const e=require("../../common/vendor.js"),I=require("../../api/courses/courses.js"),C=require("../../state/modules/auth.js");require("../../utils/request.js");const p=require("../../state/modules/actions.js");require("../../state/modules/mes.js");require("../../api/notify/index.js");if(!Array){const m=e.resolveComponent("van-button"),c=e.resolveComponent("van-empty");(m+c)()}const g=e.defineComponent({__name:"tab-mycourse",props:{change:{type:Function}},setup(m){e.ref([]);const c=e.H(),_=(t,a,s,r,u,o,l,d,h,y)=>{console.log(a,s,r,u,l,d,h),t===0?(p.useActionsStore().setClassID(a),p.useActionsStore().setClassname(r),p.useActionsStore().setCoachID(t),c.push({name:"studentDetail",params:{studentId:y,courseId:a,CoachPunchInAuth:"true"}})):(p.useActionsStore().setClassID(a),c.push({name:"mycourse",params:{id:a,Percentage:s,name:r,desc:u,CoachName:encodeURIComponent(o),LessonCount:l,EndTime:d,CreatedAt:h}}))},i=t=>t;let n=e.ref({});const f=()=>{I.getMycourese().then(t=>{n.value=[],(t.data.data||[]).sort((s,r)=>e.dayjs(r.CreatedAt).valueOf()-e.dayjs(s.CreatedAt).valueOf()).forEach(s=>{console.log(e.dayjs(s.CreatedAt).format("YYYY-MM")),n.value[e.dayjs(s.CreatedAt).format("YYYY-MM")]||(n.value[e.dayjs(s.CreatedAt).format("YYYY-MM")]=[]),n.value[e.dayjs(s.CreatedAt).format("YYYY-MM")].push(i(s))}),e.index.hideLoading()}).catch(t=>{console.log(t),e.index.hideLoading(),e.index.showToast({title:"加载数据错误",icon:"error"})})};return e.onMounted(()=>{e.index.showLoading({title:"数据加载中"}),f(),e.index.$on("alreadyBuy",()=>{f()}),setTimeout(()=>{e.index.hideLoading()},3e3)}),(t,a)=>e.e({a:Object.keys(e.unref(n)).length>0},Object.keys(e.unref(n)).length>0?{b:e.f(Object.keys(e.unref(n)),(s,r,u)=>({a:e.f(e.unref(n)[s],(o,l,d)=>e.e({a:o.CoachID!==0},o.CoachID!==0?{b:e.t(o.CourseType==="lesson"?o.LessonCount+"节":"包月")}:{},{c:o.CoachID!==0},o.CoachID!==0?{d:e.t(o.CoachName)}:{},{e:o.CoachID!==0},o.CoachID!==0?{f:e.t(o.Percentage)}:{},{g:e.o(h=>_(o.CoachID,o.ID,o.Percentage,o.Name,o.Description,o.CoachName,o.LessonCount,o.EndTime,o.CreatedAt,o.UserID),o.ID),h:"092b1a29-0-"+u+"-"+d,i:o.ID})),b:r})),c:e.p({plain:!0,size:"small",color:"#6bafa6"})}:e.e({d:e.unref(C.useAuthStore)().getToken},e.unref(C.useAuthStore)().getToken?{e:e.p({description:"您还没有课程哦~，可以前往购买添加课程哦~"})}:{f:e.p({description:"您还没登录，请先登录"})}))}}),v=e._export_sfc(g,[["__scopeId","data-v-092b1a29"],["__file","J:/fItness/wx-fitness/apps/fitness/src/components/index/tab-mycourse.vue"]]);wx.createComponent(v);
