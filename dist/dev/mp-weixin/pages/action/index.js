"use strict";const e=require("../../common/vendor.js"),_=require("../../api/action/action.js");require("../../utils/request.js");if(!Array){const h=e.resolveComponent("cu-custom"),u=e.resolveComponent("van-icon"),s=e.resolveComponent("van-empty");(h+u+s)()}const w=e.defineComponent({__name:"index",setup(h){function u(t){const r=(a,c)=>a.OrderNum!==c.OrderNum?c.OrderNum-a.OrderNum:c.id-a.id,n=a=>a.map(c=>({...c,children:n(c.children)})).sort(r);return t.map(a=>({...a,children:n(a.children)})).sort(r)}const s=(t,r)=>{o.value[l.value].children[r].active=!o.value[l.value].children[r].active,console.log(o.value[l.value].children[r].active)},i=e.ref([{name:"A",id:0,OrderNum:1,children:[]},{name:"B",id:1,OrderNum:2,children:[]},{name:"C",id:2,OrderNum:3,children:[]},{name:"D",id:3,OrderNum:4,children:[]}]);i.value=u(i.value);const o=e.ref([]),d=e.ref([]);e.ref([]);const v=e.ref(0),l=e.ref(0),m=e.ref(0),f=e.ref(!0);e.ref(i.value[0]),e.onMounted(()=>{e.index.showLoading({title:"加载中...",mask:!0}),_.getFirstmenulist().then(t=>{for(let n of t.data.data){let a={name:n.Name,id:n.ID,OrderNum:n.OrderNum,children:[]};o.value.push(a)}const r=u(o.value);o.value=r,p(o.value[0])}),e.nextTick$1(()=>{e.index.hideLoading()})});const p=t=>{var r=t.id;t.children.length>0?g(t):(e.index.showLoading({title:"加载中...",mask:!0}),_.getSecByFirst(r).then(n=>{n.data.data.length>0&&(o.value.find(a=>a.id===r).children=n.data.data.map(a=>({id:a.ID,name:a.Name,OrderNum:a.OrderNum,children:[],active:!1}))),g(t),o.value=u(o.value),e.index.hideLoading()}).finally(()=>{e.index.hideLoading()}))},g=t=>{let r=[];t.children&&(t.children.length>0?(t.children.forEach(n=>{let a={name:n.name,id:n.id,OrderNum:n.OrderNum,children:[]};r.push(a)}),d.value=u(r)):(r=[],d.value=r))},N=async t=>{const r=t.currentTarget.dataset.id;v.value=r,l.value=r,m.value=(r-1)*50,p(o.value[r])},O=t=>{if(f.value){let n=0;i.value.forEach((a,c)=>{e.index.createSelectorQuery().select(`#main-${a.id}`).fields({size:!0},b=>{i.value[c].top=n,n+=b.height,i.value[c].bottom=n}).exec()}),f.value=!1}const r=t.detail.scrollTop+10;i.value.forEach(n=>{if(r>n.top&&r<n.bottom)return m.value=(n.id-1)*50,v.value=n.id,console.log(r),!1})};return(t,r)=>e.e({a:e.p({isBack:!1,bgColor:"bg-shadeTop text-white"}),b:e.f(o.value,(n,a,c)=>({a:e.t(n.name),b:e.n(a==v.value?"text-_hec6853_ cur":""),c:a,d:e.o(N,a),e:a})),c:m.value,d:d.value.length>0},d.value.length>0?{e:e.f(d.value,(n,a,c)=>e.e({a:e.t(n.name),b:o.value[l.value].children[a].active,c:"2792d9be-1-"+c,d:!o.value[l.value].children[a].active,e:"2792d9be-2-"+c,f:e.o(C=>s(n,a),a),g:o.value[l.value].children[a].active},o.value[l.value].children[a].active?{}:{},{h:a,i:"main-"+a})),f:e.p({name:"arrow-down"}),g:e.p({name:"arrow-up"})}:{h:e.p({description:"没有数据"})},{i:"main-"+l.value,j:e.o(O)})}}),y=e._export_sfc(w,[["__file","D:/data/project/fitness/prod/wx-fitness/src/pages/action/index.vue"]]);wx.createComponent(y);
